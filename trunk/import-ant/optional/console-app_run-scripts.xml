<!--
    ImportAnt
    Copyright (C) 2004-2008  Miguel Filipe Leitao Pardal

    This library is free software; you can redistribute it and/or
    modify it under the terms of the GNU Lesser General Public
    License as published by the Free Software Foundation; either
    version 2.1 of the License, or any later version.

    This library is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
    Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public
    License along with this library; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

    Contact the author at: miguel.pardal@ist.utl.pt
-->
<project name="console-app_run-scripts">

    <!--         -->
    <!-- TARGETS -->
    <!--         -->

    <!-- MAIN TARGETS (name, description) -->

    <!-- PUBLIC AUXILIARY TARGETS (name, no description) -->
    <target name="create-bat" depends="compile">
       <!-- description="Create a Windows batch file to run the program" -->
        <fail message="MUST DEFINE run.main-class PROPERTY" unless="run.main-class" />

        <property name="run.args" value="" />

        <property name="run.windows.batch.rel-dir" value="${dist.rel-dir}" />
        <property name="run.windows.batch.file-name" value="run.bat" />
        <property name="run.windows.batch.file" location="${run.windows.batch.rel-dir}/${run.windows.batch.file-name}" />
        <property name="run.windows.batch.echo" value="off" />
        <pathconvert targetos="windows" property="run.classpath.windows.property" refid="run.classpath" />

        <echo message="Generating Windows batch file ${run.windows.batch.file}" />
        <echo level="verbose" message="To run class ${run.main-class} with arguments ${run.args}" />

        <concat destfile="${run.windows.batch.file}">@echo ${run.windows.batch.echo}
@rem Windows batch file to run Java program: ${ant.project.name}
@rem Generated by ${import-ant.name} ${import-ant.version}
@rem
java -classpath &quot;${run.classpath.windows.property}&quot; ${run.main-class} ${run.args}
    </concat>
        <!-- the quotes enclosing the classpath are necessary to support file paths with spaces in them -->
    </target>

    <target name="create-sh" depends="compile">
       <!-- description="Create a Unix script to run the program" -->
        <fail message="MUST DEFINE run.main-class PROPERTY" unless="run.main-class" />

        <property name="run.args" value="" />

        <property name="run.unix.script.rel-dir" value="${dist.rel-dir}" />
        <property name="run.unix.script.file-name" value="run.sh" />
        <property name="run.unix.script.file" location="${run.unix.script.rel-dir}/${run.unix.script.file-name}" />
        <property name="run.unix.script.shell" value="/bin/sh" />
        <pathconvert targetos="unix" property="run.classpath.unix.property" refid="run.classpath" />

        <echo message="Generating Unix script file ${run.unix.script.file}" />
        <echo level="verbose" message="To run class ${run.main-class} with arguments ${run.args}" />

        <concat destfile="${run.unix.script.file}">#!${run.unix.script.shell}
# Unix script to run Java program: ${ant.project.name}
# Generated by ${import-ant.name} ${import-ant.version}
#
java -classpath &quot;${run.classpath.unix.property}&quot; ${run.main-class} ${run.args}
    </concat>
        <!-- the quotes enclosing the classpath are necessary to support file paths with spaces in them -->

        <chmod file="${run.unix.script.file}" perm="u+x" />
    </target>

    <!-- PRIVATE AUXILIARY TARGETS (-name, no description) -->

    <!-- FUNCTION TARGETS (-name(args), no description) -->

</project>
